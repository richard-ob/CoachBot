<div class="card card--has-table">
    <header class="card__header">
        <h4>Player Statistics</h4>
    </header>
    <div class="card__content table-responsive">
        <app-spinner *ngIf="isLoading"></app-spinner>
        <table *ngIf="!isLoading"
            class="table table--large table-striped table-hover table-clickable table-inner-border table-column-hover"
            [class.widget__content--loading]="isSorting">
            <thead>
                <tr>
                    <th class="team-result__ball-posession">Player</th>
                    <th class="team-result__ball-posession"></th>
                    <th sorter [sortByColumn]="'Team.TeamCode'" [sortByColumnName]="'Team'" [currentSort]="sortBy"
                        [currentOrder]="sortOrder" (sort)="loadResults($event)" class="text-center"></th>
                    <th sorter [sortByColumn]="'Position.Name'" [sortByColumnName]="'Pos'" [currentSort]="sortBy"
                        [currentOrder]="sortOrder" (sort)="loadResults($event)" class="text-center" title="Position">
                    </th>
                    <th sorter [sortByColumn]="'Goals'" [currentSort]="sortBy" [currentOrder]="sortOrder"
                        (sort)="loadResults($event)" class="text-center"></th>
                    <th sorter [sortByColumn]="'Shots'" [sortByColumnName]="'Shots'" [currentSort]="sortBy"
                        [currentOrder]="sortOrder" (sort)="loadResults($event)" class="text-center">
                    </th>
                    <th sorter [sortByColumn]="'ShotsOnGoal'" [sortByColumnName]="'On Target'" [currentSort]="sortBy"
                        [currentOrder]="sortOrder" (sort)="loadResults($event)" class="text-center">
                    </th>
                    <th sorter [sortByColumn]="'Assists'" [currentSort]="sortBy" [currentOrder]="sortOrder"
                        (sort)="loadResults($event)" class="text-center"></th>
                    <th sorter [sortByColumn]="'Passes'" [sortByColumnName]="'Passes'" [currentSort]="sortBy"
                        [currentOrder]="sortOrder" (sort)="loadResults($event)" class="text-center">
                    </th>
                    <th sorter [sortByColumn]="'PassesCompleted'" [sortByColumnName]="'Completed'"
                        [currentSort]="sortBy" [currentOrder]="sortOrder" (sort)="loadResults($event)"
                        class="text-center"></th>
                    <th sorter [sortByColumn]="'Ints'" [currentSort]="sortBy" [currentOrder]="sortOrder"
                        (sort)="loadResults($event)" class="text-center" title="Interceptions"></th>
                    <th sorter [sortByColumn]="'PossessionPercentage'" [sortByColumnName]="'Possession'"
                        [currentSort]="sortBy" [currentOrder]="sortOrder" (sort)="loadResults($event)"
                        class="text-center"></th>
                    <th sorter [sortByColumn]="'KeeperSaves'" [sortByColumnName]="'Saves'" [currentSort]="sortBy"
                        [currentOrder]="sortOrder" (sort)="loadResults($event)" class="text-center"></th>
                    <th sorter [sortByColumn]="'DistanceCoveredAverage'" [sortByColumnName]="'Distance'"
                        [currentSort]="sortBy" [currentOrder]="sortOrder" (sort)="loadResults($event)"
                        class="text-center"></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let player of players" (click)="navigateToPlayerProfile(player.playerId)"
                    title="View player's profile">
                    <td class="team-result__score">{{player.nickname}}</td>
                    <td class="text-right">
                        <span *ngIf="!player.substitute" title="Substitute">
                            <i class="icon-svg icon-substitution mr-1"></i>
                        </span>
                        <span *ngIf="player.yellowCards > 0" title="Yellow carded">
                            <i class="icon-svg icon-yellow-card mr-1"></i>
                        </span>
                        <span *ngIf="player.redCards > 0" title="Red carded">
                            <i class="icon-svg icon-red-card"></i>
                        </span>
                        <span *ngIf="player.position.name == 'GK' && player.goalsConceded == 0" title="Clean sheet">
                            <i  class="icon-svg icon-keepers-glove"></i>
                        </span>
                    </td>
                    <td class="team-result__status">{{player.channel.subTeamName || player.team.teamCode}}</td>
                    <td class="team-result__status">{{player.position.name}}</td>
                    <td class="text-center">{{player.goals}}</td>
                    <td class="text-center">{{player.shots}}</td>
                    <td class="text-center">{{player.shotsOnGoal}}</td>
                    <td class="text-center">{{player.assists}}</td>
                    <td class="text-center">{{player.passes}}</td>
                    <td class="text-center">{{player.passesCompleted}}</td>
                    <td class="text-center">{{player.interceptions}}</td>
                    <td class="text-center">{{player.possessionPercentage | percentage}}</td>
                    <td class="text-center">
                        <ng-container *ngIf="player.position.name === 'GK'; else notGk">
                            {{player.keeperSaves}}
                        </ng-container>
                        <ng-template #notGk>
                            <span class="text-muted">N/A</span>
                        </ng-template>
                    </td>
                    <td class="text-center">{{player.distanceCovered}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>