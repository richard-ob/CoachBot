<!-- Page Heading
================================================== -->
<div *ngIf="!isLoading && !matchData" class="container my-4">
    <div class="alert alert-info">
        This match result is still pending
    </div>
</div>
<div *ngIf="isLoading" class="container my-4">
    <app-spinner></app-spinner>
</div>
<div *ngIf="!isLoading && matchData" class="page-heading p-0">
    <div class="container">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <section class="game-result__section">
                    <header class="game-result__header game-result__header--alt">
                        <span class="game-result__league">{{matchData.matchInfo.type}}</span>
                        <h3 class="game-result__title">{{matchData.matchInfo.serverName}}</h3>
                        <time class="game-result__date">{{matchDate | date:'medium'}}</time>
                    </header>
                    <div class="game-result__content">
                        <!-- 1st Team -->
                        <div class="game-result__team game-result__team--first">
                            <figure class="game-result__team-logo">
                                <ng-container
                                    *ngIf="(matchData.teams[teamType.Home].matchTotal.name | countryNameToCodeConverter) != null; else blankCrest">
                                    <img
                                        src="https://www.countryflags.io/{{matchData.teams[teamType.Home].matchTotal.name | countryNameToCodeConverter}}/flat/64.png">
                                </ng-container>
                                <ng-template #blankCrest>
                                    <img src="./assets/images/soccer/blank-crest.png" style="max-width: 64px;">
                                </ng-template>
                            </figure>
                            <div class="game-result__team-info">
                                <h5 class="game-result__team-name">
                                    {{matchData.teams[teamType.Home].matchTotal.name}}</h5>
                            </div>
                            <div class="game-result__team-events--first">
                                <span *ngFor="let goalEvents of matchData.matchEvents  | arrayFilter:'team':'home' | arrayFilter:'event':eventType.Goal">
                                    {{goalEvents.player1SteamId | steamIdToPlayerName:matchData.players}}
                                    ({{goalEvents.second | secondsToMinutes}}’)
                                    <i class="icon-svg icon-soccer-ball"></i>
                                </span>
                            </div>
                        </div>
                        <!-- 1st Team / End -->

                        <div class="game-result__score-wrap">
                            <div class="game-result__score game-result__score--lg">
                                <span class="game-result__score-result">{{matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Goals]}}</span>
                                <span class="game-result__score-dash">-</span>
                                <span class="game-result__score-result">{{matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Goals]}}</span>
                            </div>
                            <div [ngSwitch]="matchData.matchInfo.periods" class="game-result__score-label">
                                <span *ngSwitchCase="2">FT</span>
                                <span *ngSwitchCase="3">AET</span>
                                <span *ngSwitchCase="4">AET</span>
                                <span *ngSwitchCase="5">PENS</span>
                            </div>
                            <div class="game-result__score-label">Final Score</div>
                        </div>

                        <!-- 2nd Team -->
                        <div class="game-result__team game-result__team--second">
                            <figure class="game-result__team-logo">
                                <ng-container
                                    *ngIf="(matchData.teams[teamType.Away].matchTotal.name | countryNameToCodeConverter) != null; else blankCrest">
                                    <img
                                        src="https://www.countryflags.io/{{matchData.teams[teamType.Away].matchTotal.name | countryNameToCodeConverter}}/flat/64.png">
                                </ng-container>
                                <ng-template #blankCrest>
                                    <img src="./assets/images/soccer/blank-crest.png" style="max-width: 64px;">
                                </ng-template>
                            </figure>
                            <div class="game-result__team-info">
                                <h5 class="game-result__team-name">
                                    {{matchData.teams[teamType.Away].matchTotal.name}}</h5>
                            </div>
                            <div class="game-result__team-events--second">
                                <span *ngFor="let goalEvents of matchData.matchEvents  | arrayFilter:'team':'away' | arrayFilter:'event':eventType.Goal">
                                    {{goalEvents.player1SteamId | steamIdToPlayerName:matchData.players}}
                                    ({{goalEvents.second | secondsToMinutes}}’)
                                    <i class="icon-svg icon-soccer-ball"></i>
                                </span>
                            </div>
                        </div>
                        <!-- 2nd Team / End -->
                    </div>

                </section>
            </div>
        </div>
    </div>
</div>
<!-- Page Heading / End -->


<!-- Content
================================================== -->
<div *ngIf="matchData" class="site-content">
    <div class="container">

        <div class="row">

            <!-- Content -->
            <div class="content col-lg-8">

                <div class="row">

                    <div class="col-md-6">

                        <!-- Widget: Lineup Table -->
                        <aside class="widget card card--has-table widget--sidebar widget-lineup-table">
                            <div class="widget__title card__header">
                                <h4>{{matchData.teams[teamType.Home].matchTotal.name}} Lineup</h4>
                            </div>
                            <div class="widget__content card__content">

                                <!-- Lineup Table -->
                                <div class="table-responsive">
                                    <table class="table lineup-table">
                                        <thead>
                                            <tr>
                                                <th class="lineup__pos">POS</th>
                                                <th class="lineup__name">Player Name</th>
                                                <th class="lineup__info"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let player of matchData.players">
                                                <tr
                                                    *ngIf="player.matchPeriodData && player.matchPeriodData.length && player.matchPeriodData[0].info.team === 'home'">
                                                    <td class="lineup__pos">{{player.matchPeriodData[0].info.position}}
                                                    </td>
                                                    <td class="lineup__name">{{player.info.name}}</td>
                                                    <td class="lineup__info"><i class="icon-svg "></i></td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Lineup Table / End -->

                            </div>
                        </aside>
                        <!-- Widget: Lineup Table / End -->

                    </div>

                    <div class="col-md-6">

                        <!-- Widget: Lineup Table Alt -->
                        <aside class="widget card card--alt-color card--has-table widget--sidebar widget-lineup-table">
                            <div class="widget__title card__header">
                                <h4>{{matchData.teams[teamType.Away].matchTotal.name}} Lineup</h4>
                            </div>
                            <div class="widget__content card__content">

                                <!-- Lineup Table -->
                                <div class="table-responsive">
                                    <table class="table lineup-table">
                                        <thead>
                                            <tr>
                                                <th class="lineup__pos">POS</th>
                                                <th class="lineup__name">Player Name</th>
                                                <th class="lineup__info"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let player of matchData.players">
                                                <tr
                                                    *ngIf="player.matchPeriodData && player.matchPeriodData.length && player.matchPeriodData[0].info.team === 'away'">
                                                    <td class="lineup__pos">{{player.matchPeriodData[0].info.position}}
                                                    </td>
                                                    <td class="lineup__name">{{player.info.name}}</td>
                                                    <td class="lineup__info"><i class="icon-svg "></i></td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Lineup Table / End -->

                            </div>
                        </aside>
                        <!-- Widget: Lineup Table Alt / End -->

                    </div>
                </div>

                <!-- Game Scoreboard -->
                <div class="card">
                    <header class="card__header">
                        <h4>Match Statistics</h4>
                    </header>
                    <div class="card__content">

                        <!-- Game Result -->
                        <div class="game-result">
                            <section class="game-result__section">
                                <div class="game-result__content mb-5">
                                    <div class="game-result__stats">
                                        <div class="row">
                                            <div class="col-6 col-md-6 order-md-1 game-result__stats-team-1">

                                                <div class="row">
                                                    <div class="col-6">
                                                        <app-circle-graph
                                                            [totalValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Shots]"
                                                            [partValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.ShotsOnGoal]"
                                                            [title]="'Shot Accuracy'" [fillColour]="'#38a9ff'">
                                                        </app-circle-graph>
                                                    </div>
                                                    <div class="col-6">
                                                        <app-circle-graph
                                                            [totalValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Passes]"
                                                            [partValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.PassesCompleted]"
                                                            [title]="'Pass Accuracy'" [fillColour]="'#38a9ff'">
                                                        </app-circle-graph>
                                                    </div>

                                                    <div class="spacer"></div>

                                                </div>
                                            </div>
                                            <div class="col-6 col-md-6 order-md-3 game-result__stats-team-2">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <app-circle-graph
                                                            [totalValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Shots]"
                                                            [partValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.ShotsOnGoal]"
                                                            [title]="'Shot Accuracy'" [fillColour]="'#dc3545'">
                                                        </app-circle-graph>
                                                    </div>
                                                    <div class="col-6">
                                                        <app-circle-graph
                                                            [totalValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Passes]"
                                                            [partValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.PassesCompleted]"
                                                            [title]="'Pass Accuracy'" [fillColour]="'#dc3545'">
                                                        </app-circle-graph>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="spacer"></div>


                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Ball Posession -->
                            <section class="game-result__section">

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Possession]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Possession]"
                                    [title]="'Possession'" [displayValueMode]="displayValueModes.Percentage">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Shots]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Shots]"
                                    [title]="'Shots'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.ShotsOnGoal]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.ShotsOnGoal]"
                                    [title]="'Shots On Goal'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.KeeperSaves]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.KeeperSaves]"
                                    [title]="'Saves'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Passes]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Passes]"
                                    [title]="'Passes'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.PassesCompleted]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.PassesCompleted]"
                                    [title]="'Passes Completed'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Corners]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Corners]"
                                    [title]="'Corners'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                                <app-horizontal-bar-graph
                                    [homeValue]="matchData.teams[teamType.Home].matchTotal.statistics[statisticType.Fouls]"
                                    [awayValue]="matchData.teams[teamType.Away].matchTotal.statistics[statisticType.Fouls]"
                                    [title]="'Fouls'" [displayValueMode]="displayValueModes.Value">
                                </app-horizontal-bar-graph>

                            </section>
                            <!-- Ball Posession / End -->

                            <!-- Game Timeline -->

                            <!-- Ball Posession / End -->
                        </div>
                        <!-- Game Timeline / End -->

                    </div>
                </div>
                <!-- Game Scoreboard / End -->

            </div>
            <!-- Content / End -->

            <!-- Sidebar -->
            <div class="sidebar col-lg-4">

                <!-- Widget: Lineup -->

                <!-- Widget: Lineup / End -->

                <!-- Widget: Game Commentary -->
                <aside class="widget card card--no-paddings widget--sidebar widget-commentary">
                    <div class="widget__title card__header">
                        <h4>Game Highlights</h4>
                    </div>
                    <div class="widget__content card__content">
                        <ul class="commentary">
                            <ng-container *ngFor="let matchEvent of matchData.matchEvents">
                                <li *ngIf="matchEvent.event !== eventType.Null" class="commentary__item">
                                    <span class="commentary__time">{{matchEvent.second | secondsToMinutes}}'</span>
                                    <div [ngSwitch]="matchEvent.event" class="commentary__icon">
                                        <i *ngSwitchCase="eventType.Foul" class="icon-svg icon-whistle"></i>
                                        <i *ngSwitchCase="eventType.Goal" class="icon-svg icon-soccer-ball"></i>
                                        <i *ngSwitchCase="eventType.OwnGoal"
                                            class="icon-svg icon-soccer-ball-own-goal"></i>
                                        <i *ngSwitchCase="eventType.YellowCard" class="icon-svg icon-yellow-card"></i>
                                        <i *ngSwitchCase="eventType.SecondYellow" class="icon-svg icon-red-card"></i>
                                        <i *ngSwitchCase="eventType.RedCard" class="icon-svg icon-red-card"></i>
                                        <i *ngSwitchCase="eventType.Penalty"
                                            class="icon-svg icon-soccer-ball-penalty"></i>
                                        <i *ngSwitchCase="eventType.Miss" class="icon-svg icon-soccer-shots"></i>
                                        <i *ngSwitchCase="eventType.Save" class="icon-svg icon-keepers-glove"></i>
                                    </div>
                                    {{matchEvent.event}}
                                    <strong>{{matchEvent.player1SteamId | steamIdToPlayerName:matchData.players}}</strong>
                                    <span *ngIf="matchEvent.event === eventType.SecondYellow">Received a second yellow card</span>
                                    <ng-container *ngIf="matchEvent.player2SteamId">
                                        <ng-container [ngSwitch]="matchEvent.event">
                                            <span *ngSwitchCase="eventType.Goal">&nbsp;Assist by
                                                    <strong>{{matchEvent.player2SteamId | steamIdToPlayerName:matchData.players}}</strong></span>
                                            <span *ngSwitchCase="eventType.Save">&nbsp;Shot by
                                                    <strong>{{matchEvent.player2SteamId | steamIdToPlayerName:matchData.players}}</strong></span>
                                            <span *ngSwitchCase="eventType.Foul">&nbsp;Foul on
                                                <strong>{{matchEvent.player2SteamId | steamIdToPlayerName:matchData.players}}</strong></span>
                                        </ng-container>
                                    </ng-container>
                                </li>
                            </ng-container>
                        </ul>
                    </div>
                </aside>
                <!-- Widget: Game Commentary / End -->

            </div>
            <!-- Sidebar / End -->
        </div>
    </div>
</div>

<!-- Content / End -->