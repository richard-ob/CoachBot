<div class="container-fluid my-4">
    <!-- Team Latest Results -->
    <div class="card card--has-table">
        <div class="card__header card__header--has-btn">
            <h4>Players</h4>
            <!-- Result Filter -->
            <ul class="team-result-filter">
                <li class="team-result-filter__item">
                    <select class="form-control" #timePeriodSelect>
                        <option value=0>All Time</option>
                        <option value="365">Year</option>
                        <option value="31">Month</option>
                        <option value="7">Week</option>
                    </select>
                </li>
                <li class="team-result-filter__item">
                    <button type="button" class="btn btn-default btn-outline btn-xs card-header__button"
                        (click)="setTimePeriod(timePeriodSelect.value)">
                        Filter By Time Period
                    </button>
                </li>
            </ul>
            <!-- Result Filter / End -->
        </div>
        <div class="card__content table-responsive">
            <app-spinner *ngIf="isLoading"></app-spinner>
            <table *ngIf="!isLoading" class="table table--large table-striped table-hover table-clickable">
                <thead>
                    <tr>
                        <th class="team-result__vs" style="width: 40px;"></th>
                        <th style="cursor: pointer" class="team-result__status" (click)="loadPage(currentPage, 'Name')">
                            <span style=" white-space: nowrap; ">
                                Name&nbsp;
                                <i *ngIf="sortBy === 'Name' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Name' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Name'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th class="text-center">Nationality</th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'Appearances')">
                            <span style=" white-space: nowrap; ">
                                Appearances&nbsp;
                                <i *ngIf="sortBy === 'Appearances' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Appearances' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Appearances'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'SubstituteAppearances')">
                            <span style=" white-space: nowrap; ">
                                As Sub&nbsp;
                                <i *ngIf="sortBy === 'SubstituteAppearances' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'SubstituteAppearances' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'SubstituteAppearances'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status" (click)="loadPage(currentPage, 'Wins')">
                            <span style=" white-space: nowrap; ">
                                    Wins&nbsp;
                                <i *ngIf="sortBy === 'Wins' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Wins' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Wins'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'Losses')">
                            <span style=" white-space: nowrap; ">
                                    Losses&nbsp;
                                <i *ngIf="sortBy === 'Losses' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Losses' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Losses'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'Draws')">
                            <span style=" white-space: nowrap; ">
                                    Draws&nbsp;
                                <i *ngIf="sortBy === 'Draws' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Draws' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Draws'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'Goals')">
                            <span style=" white-space: nowrap; ">
                                    Goals&nbsp;
                                <i *ngIf="sortBy === 'Goals' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Goals' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Goals'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'GoalsAverage')">
                            <span style=" white-space: nowrap; ">
                                    Avg. Goals&nbsp;
                                <i *ngIf="sortBy === 'GoalsAverage' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'GoalsAverage' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'GoalsAverage'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'ShotAccuracyPercentage')">
                            <span style=" white-space: nowrap; ">
                                    Shot Accuracy&nbsp;
                                <i *ngIf="sortBy === 'ShotAccuracyPercentage' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'ShotAccuracyPercentage' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'ShotAccuracyPercentage'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'Assists')">
                            <span style=" white-space: nowrap; ">
                                Assists&nbsp;
                                <i *ngIf="sortBy === 'Assists' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'Assists' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'Assists'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'AssistsAverage')">
                            <span style=" white-space: nowrap; ">
                                Avg. Assists&nbsp;
                                <i *ngIf="sortBy === 'AssistsAverage' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'AssistsAverage' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'AssistsAverage'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'PassesAverage')">
                            <span style=" white-space: nowrap; ">
                                Avg. Passes&nbsp;
                                <i *ngIf="sortBy === 'PassesAverage' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'PassesAverage' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'PassesAverage'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th style="cursor: pointer" class="team-result__status"
                            (click)="loadPage(currentPage, 'PassCompletionPercentageAverage')">
                            <span style=" white-space: nowrap; ">
                                    Pass Completion&nbsp;
                                <i *ngIf="sortBy === 'PassCompletionPercentageAverage' && sortOrder === 'ASC'"
                                    class="fas fa-sort-up"></i>
                                <i *ngIf="sortBy === 'PassCompletionPercentageAverage' && sortOrder === 'DESC'"
                                    class="fas fa-sort-down"></i>
                                <i *ngIf="sortBy !== 'PassCompletionPercentageAverage'" class="fas fa-sort"></i>
                            </span>
                        </th>
                        <th class="team-result__ball-posession">Yellow Cards</th>
                        <th class="team-result__game-overview">Red Cards</th>
                        <th class="team-result__game-overview">Avg. Distance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let statistics of playerStatistics | paginate: { itemsPerPage: 10, currentPage: currentPage, totalItems: totalItems }"
                        (click)="navigateToProfile(statistics.playerId)">
                        <td class="team-result__vs">
                            <a *ngIf="statistics.steamUserProfile"
                                [attr.href]="getSteamProfileLink(statistics.steamID)">
                                <img [attr.src]="statistics.steamUserProfile.avatar" style="height: 16px; width: 16px;">
                            </a>
                        </td>
                        <td class="team-result__score">{{statistics.name}}</td>
                        <td class="team-result__ball-posession text-center">
                            <ng-container *ngIf="statistics.steamUserProfile">
                                <img *ngIf="statistics.steamUserProfile.loccountrycode; else unknownFlag"
                                    src="https://www.countryflags.io/{{statistics.steamUserProfile.loccountrycode}}/flat/24.png">
                                <ng-template #unknownFlag><i class="fas fa-question"></i></ng-template>
                            </ng-container>
                        </td>
                        <td class="team-result__status">{{statistics.appearances}}</td>
                        <td class="team-result__status">{{statistics.substituteAppearances}}</td>
                        <td class="team-result__status">{{statistics.wins}}</td>
                        <td class="team-result__status">{{statistics.losses}}</td>
                        <td class="team-result__status">{{statistics.draws}}</td>
                        <td class="team-result__status">{{statistics.goals}}</td>
                        <td class="team-result__status">{{statistics.goalsAverage | number : '1.2-2'}}</td>
                        <td class="team-result__status">{{statistics.shotAccuracyPercentage | percent }}</td>
                        <td class="team-result__status">{{statistics.assists}}</td>
                        <td class="team-result__status">{{statistics.assistsAverage | number : '1.2-2'}}</td>
                        <td class="team-result__status">{{statistics.passesAverage | number : '1.2-2'}}</td>
                        <td class="team-result__status">{{statistics.passCompletionPercentageAverage | percent }}
                        </td>
                        <td class="team-result__status">{{statistics.yellowCards}}</td>
                        <td class="team-result__status">{{statistics.redCards}}</td>
                        <td class="team-result__status">{{statistics.distanceCoveredAverage | number : '1.2-2'}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div *ngIf="!isLoading && totalPages > 1" class="text-center mb-4">
        <pagination-controls (pageChange)="loadPage($event)"></pagination-controls>
    </div>
</div>
<!-- Team Latest Results / End -->