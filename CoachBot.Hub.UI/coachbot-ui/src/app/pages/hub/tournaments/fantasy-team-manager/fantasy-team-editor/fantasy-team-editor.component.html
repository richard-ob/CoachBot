<div class="container py-4">
    <ng-container *ngIf="!isLoading; else spinner">
        <div class="row">
            <div class="col-8">
                <div class="widget card widget--sidebar widget-filter-price">
                    <div class="widget__title card__header">
                        <h4>{{fantasyTeam.name}}</h4>
                    </div>
                    <div class="widget__content card__content position-relative" style="min-height: 48rem;"
                        [class.widget__content--loading]="isUpdating">
                        <div class="football-pitch">
                            <div class="outline marking"></div>
                            <div class="box left marking"></div>
                            <div class="box-d left marking"></div>
                            <div class="box left small marking"></div>
                            <div class="box right marking"></div>
                            <div class="box-d right marking"></div>
                            <div class="box right small marking"></div>
                            <div class="spot left marking"></div>
                            <div class="spot right marking"></div>
                            <div class="spot center marking"></div>
                            <div class="center-line marking"></div>
                            <div class="center-circle marking"></div>
                            <div class="corner top left marking"></div>
                            <div class="corner top right marking"></div>
                            <div class="corner bottom left marking"></div>
                            <div class="corner bottom right marking"></div>
                            <div class="grass"></div>
                        </div>
                        <div *ngIf="fantasyTeam && fantasyTeam.fantasyTeamSelections"
                            class="fantasy-pitch--player-container flex-column">
                            <div class="d-flex justify-content-around">
                                <div *ngFor="let selection of fantasyTeam.fantasyTeamSelections | filterByImpure:['isFlex']:false | filterByImpure:['fantasyPlayer.positionGroup']:positionGroups.Goalkeeper"
                                    class="fantasy-pitch--player">
                                    <app-fantasy-player [fantasyPlayer]="selection.fantasyPlayer"
                                        (click)="removeFantasyTeamSelection(selection)"></app-fantasy-player>
                                </div>
                            </div>
                            <div class="d-flex justify-content-around">
                                <div *ngFor="let selection of fantasyTeam.fantasyTeamSelections | filterByImpure:['isFlex']:false | filterByImpure:['fantasyPlayer.positionGroup']:positionGroups.Defence"
                                    class="fantasy-pitch--player">
                                    <app-fantasy-player [fantasyPlayer]="selection.fantasyPlayer"
                                        (click)="removeFantasyTeamSelection(selection)"></app-fantasy-player>
                                </div>
                            </div>
                            <div class="d-flex justify-content-around">
                                <div *ngFor="let selection of fantasyTeam.fantasyTeamSelections | filterByImpure:['isFlex']:false | filterByImpure:['fantasyPlayer.positionGroup']:positionGroups.Midfield"
                                    class="fantasy-pitch--player">
                                    <app-fantasy-player [fantasyPlayer]="selection.fantasyPlayer"
                                        (click)="removeFantasyTeamSelection(selection)"></app-fantasy-player>
                                </div>
                            </div>
                            <div class="d-flex justify-content-around">
                                <div *ngFor="let selection of fantasyTeam.fantasyTeamSelections | filterByImpure:['isFlex']:false | filterByImpure:['fantasyPlayer.positionGroup']:positionGroups.Attack"
                                    class="fantasy-pitch--player">
                                    <app-fantasy-player [fantasyPlayer]="selection.fantasyPlayer"
                                        (click)="removeFantasyTeamSelection(selection)"></app-fantasy-player>
                                </div>
                            </div>
                            <div class="d-flex justify-content-around">
                                <div *ngFor="let selection of fantasyTeam.fantasyTeamSelections | filterByImpure:['isFlex']:true"
                                    class="fantasy-pitch--player">
                                    <app-fantasy-player [fantasyPlayer]="selection.fantasyPlayer"
                                        (click)="removeFantasyTeamSelection(selection)"></app-fantasy-player>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <app-fantasy-team-editor-players *ngIf="fantasyTeam" [tournamentId]="fantasyTeam.tournamentId"
                    (playerSelected)="addFantasyTeamSelection($event)">
                </app-fantasy-team-editor-players>
            </div>
        </div>
    </ng-container>
    <ng-template #spinner>
        <app-spinner></app-spinner>
    </ng-template>

</div>