<div class="container py-4">
    <!-- Team Latest Results -->
    <div *ngIf="matches && !matches.length" class="alert alert-info">
        No matches have been played yet. Hang tight!
    </div>
    <app-spinner *ngIf="!matches"></app-spinner>
    <div *ngIf="matches && matches.length" class="card card--has-table">
        <div class="card__header card__header--has-btn">
            <h4>Matches</h4>
            <ul *ngIf="showFilters" class="team-result-filter d-none d-md-inline float-right">
                <li class="team-result-filter__item">
                    <mat-datepicker #dateFromPicker></mat-datepicker>
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend clickable">
                            <span class="input-group-text" id="basic-addon1" (click)="dateFromPicker.open()">
                                <i class="fas fa-calendar"></i>
                            </span>
                        </div>
                        <input matInput class="form-control input-xs" [matDatepicker]="dateFromPicker"
                            [(ngModel)]="filters.dateFrom" placeholder="Date From" (click)="dateFromPicker.open()">
                    </div>
                </li>
                <li class="team-result-filter__item">
                    <mat-datepicker #dateToPicker></mat-datepicker>
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend clickable">
                            <span class="input-group-text" id="basic-addon1" (click)="dateToPicker.open()">
                                <i class="fas fa-calendar"></i>
                            </span>
                        </div>
                        <input matInput class="form-control input-xs" [matDatepicker]="dateToPicker"
                            [(ngModel)]="filters.dateTo" placeholder="Date To" (click)="dateToPicker.open()">
                    </div>
                </li>
                <li class="team-result-filter__item">
                    <select class="form-control">
                        <option>All</option>
                        <option>Friendlies</option>
                        <option>Competitive</option>
                    </select>
                </li>
                <li class="team-result-filter__item">
                    <button type="button" class="btn btn-default btn-outline btn-xs card-header__button"
                        (click)="setFilters()">
                        Filter
                    </button>
                </li>
            </ul>
        </div>
        <div class="card__content table-responsive">
            <table *ngIf="matches && matches.length" class="table table-striped table-hover table-clickable"
                [class.widget__content--loading]="isLoadingPage">
                <thead>
                    <tr>
                        <th class="team-result__date">Date</th>
                        <th class="team-result__vs text-center">Result</th>
                        <th class="team-result__status">Match Type</th>
                        <th class="team-result__status">Match Format</th>
                        <th class="team-result__ball-posession">Location</th>
                        <th class="team-result__game-overview">Match Overview</th>
                    </tr>
                </thead>
                <tbody>
                    <tr
                        *ngFor="let match of matches | paginate: { itemsPerPage: 10, currentPage: currentPage, totalItems: totalItems }">
                        <td class="team-result__date">
                            {{(match.readiedDate || match.scheduledKickOff)| date:'medium'}}
                        </td>
                        <td class="team-result__vs text-center">
                            <strong [attr.title]="match.teamHome.name">{{match.teamHome.teamCode}}</strong>
                            <span class="mx-1">
                                    <img *ngIf="match.teamHome.badgeImage"
                                        [src]="match.teamHome.badgeImage.base64EncodedImage">
                                    <img *ngIf="!match.teamHome.badgeImage" src="./assets/images/soccer/blank-crest.png"
                                        style="max-height: 20px">
                                </span>
                            <span *ngIf="match.matchStatistics; else matchNotPlayed" class="mx-1">
                                <span class="team-result--score">{{match?.matchStatistics?.matchGoalsHome}}</span>
                            <span class="team-result--score">{{match?.matchStatistics?.matchGoalsAway}}</span>
                            </span>
                            <ng-template #matchNotPlayed>
                                <span style="background-color: black; padding: .2rem .4rem; color: white;">
                                        TBC
                                    </span>
                            </ng-template>
                            <span class="mx-1">
                                    <img *ngIf="match.teamAway.badgeImage"
                                        [src]="match.teamAway.badgeImage.base64EncodedImage">
                                    <img *ngIf="!match.teamAway.badgeImage" src="./assets/images/soccer/blank-crest.png"
                                        style="max-height: 20px">
                                </span>
                            <strong [attr.title]="match.teamAway.name">{{match.teamAway.teamCode}}</strong>
                        </td>
                        <td class="team-result__status">
                            <ng-container [ngSwitch]="match.matchType">
                                <span *ngSwitchCase="matchTypes.UnrankedFriendly">Unranked Friendly</span>
                                <span *ngSwitchCase="matchTypes.RankedFriendly">Ranked Friendly</span>
                                <span *ngSwitchCase="matchTypes.Competition">
                                    {{match.tournament?.name}}
                                </span>
                            </ng-container>
                        </td>
                        <td class="team-result__status">{{match.format}}v{{match.format}}</td>
                        <td class="team-result__ball-posession" title="{{match.server.country.name}}">
                            <img src="https://www.countryflags.io/{{match.server.country.code}}/flat/24.png">

                        </td>
                        <td class="team-result__game-overview">
                            <a [routerLink]="['../match-overview', match.id]" class="btn btn-xs btn-primary">Match
                                Overview</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div *ngIf="totalPages > 1" class="text-center">
        <pagination-controls (pageChange)="loadPage($event)"></pagination-controls>
    </div>
</div>
<!-- Team Latest Results / End -->